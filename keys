repeat task.wait() until game:IsLoaded()

--// Panda Ov2.5 Key System + UI
local HttpService = game:GetService("HttpService")
local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer

-- üîî Load Custom Notification
local Notif = loadstring(game:HttpGet("https://raw.githubusercontent.com/thaemmayanh/hub/refs/heads/main/notif"))() -- ho·∫∑c d√°n tr·ª±c ti·∫øp code Notif b·∫°n g·ª≠i ·ªü tr√™n

-- üÜî CONFIG
local Identifier = "pia"
local keyFile = "piahubkey.txt"
local savedKey = isfile and isfile(keyFile) and readfile(keyFile) or ""
local hwid = tostring(LocalPlayer.UserId)

-- ‚úÖ Validate Key Function (Ov2.5)
local function ValidateKey(key, serviceId, hwid)
    local validationUrl = "https://pandadevelopment.net/v2_validation?key=" .. key .. "&service=" .. serviceId .. "&hwid=" .. hwid
    local success, responseBody

    if syn and syn.request then
        local res = syn.request({Url = validationUrl, Method = "GET"})
        if res and res.StatusCode == 200 then success, responseBody = true, res.Body end
    elseif http_request then
        local res = http_request({Url = validationUrl, Method = "GET"})
        if res and res.StatusCode == 200 then success, responseBody = true, res.Body end
    elseif request then
        local res = request({Url = validationUrl, Method = "GET"})
        if res and res.StatusCode == 200 then success, responseBody = true, res.Body end
    else
        local ok, res = pcall(function()
            return HttpService:RequestAsync({Url = validationUrl, Method = "GET"})
        end)
        if ok and res and res.Success then success, responseBody = true, res.Body end
    end

    if not responseBody then return false, "No response from server" end
    local ok, data = pcall(function() return HttpService:JSONDecode(responseBody) end)
    if not ok or not data then return false, "Failed to decode JSON" end

    return data["V2_Authentication"] == "success", data["reason"] or "Invalid or expired key"
end

-- üîó Get Key Link
local function GetKeyLink(serviceId, hwid)
    return "https://pandadevelopment.net/getkey?service=" .. serviceId .. "&hwid=" .. hwid
end

-- üñ• UI
local gui = Instance.new("ScreenGui", game.CoreGui)
gui.Name = "PIAHUBKEY"
gui.Enabled = false

local frame = Instance.new("Frame", gui)
frame.Size = UDim2.new(0, 350, 0, 180)
frame.Position = UDim2.new(0.5, -175, 0.5, -90)
frame.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
frame.BorderSizePixel = 0
Instance.new("UICorner", frame).CornerRadius = UDim.new(0, 10)

local title = Instance.new("TextLabel", frame)
title.Text = "PIAHUB KEY SYSTEM"
title.Font = Enum.Font.GothamBold
title.TextSize = 20
title.TextColor3 = Color3.fromRGB(255, 255, 255)
title.BackgroundTransparency = 1
title.Size = UDim2.new(1, -30, 0, 30)
title.Position = UDim2.new(0, 10, 0, 5)

local closeBtn = Instance.new("TextButton", frame)
closeBtn.Size = UDim2.new(0, 25, 0, 25)
closeBtn.Position = UDim2.new(1, -30, 0, 5)
closeBtn.Text = "X"
closeBtn.BackgroundColor3 = Color3.fromRGB(200, 0, 0)
closeBtn.TextColor3 = Color3.fromRGB(255, 255, 255)
Instance.new("UICorner", closeBtn).CornerRadius = UDim.new(0, 5)
closeBtn.MouseButton1Click:Connect(function() gui.Enabled = false end)

local textbox = Instance.new("TextBox", frame)
textbox.PlaceholderText = "Enter your key here"
textbox.Text = savedKey
textbox.Font = Enum.Font.Gotham
textbox.TextSize = 16
textbox.TextColor3 = Color3.fromRGB(255, 255, 255)
textbox.BackgroundColor3 = Color3.fromRGB(45, 45, 45)
textbox.Size = UDim2.new(0.9, 0, 0, 35)
textbox.Position = UDim2.new(0.05, 0, 0, 50)
textbox.ClearTextOnFocus = false
Instance.new("UICorner", textbox).CornerRadius = UDim.new(0, 6)

local statusLabel = Instance.new("TextLabel", frame)
statusLabel.Text = ""
statusLabel.Font = Enum.Font.Gotham
statusLabel.TextSize = 14
statusLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
statusLabel.BackgroundTransparency = 1
statusLabel.Position = UDim2.new(0, 0, 1, -25)
statusLabel.Size = UDim2.new(1, 0, 0, 25)

-- ‚úÖ Function Check Key
local function doCheck()
    Notif.New("üîÑ ƒêang ki·ªÉm tra key...", 2)
    statusLabel.Text = "üîÑ Checking key..."
    local isValid, message = ValidateKey(textbox.Text, Identifier, hwid)
    if isValid then
        statusLabel.Text = "‚úîÔ∏è Key is valid!"
        statusLabel.TextColor3 = Color3.fromRGB(100, 255, 100)
        if writefile then writefile(keyFile, textbox.Text) end
        Notif.New("‚úîÔ∏è Key h·ª£p l·ªá! ƒêang t·∫£i script...", 3)
        task.wait(1)
        gui.Enabled = false
        loadstring(game:HttpGet("https://raw.githubusercontent.com/thaemmayanh/hub/refs/heads/main/AC.lua"))()
    else
        statusLabel.Text = "‚ùå " .. message
        statusLabel.TextColor3 = Color3.fromRGB(255, 50, 50)
    end
end

local checkBtn = Instance.new("TextButton", frame)
checkBtn.Text = "‚úÖ Check Key"
checkBtn.Font = Enum.Font.GothamBold
checkBtn.TextSize = 16
checkBtn.TextColor3 = Color3.fromRGB(255, 255, 255)
checkBtn.BackgroundColor3 = Color3.fromRGB(50, 150, 50)
checkBtn.Size = UDim2.new(0.45, -5, 0, 35)
checkBtn.Position = UDim2.new(0.05, 0, 0, 100)
Instance.new("UICorner", checkBtn).CornerRadius = UDim.new(0, 6)
checkBtn.MouseButton1Click:Connect(doCheck)

local getKeyBtn = Instance.new("TextButton", frame)
getKeyBtn.Text = "üîó Get Key"
getKeyBtn.Font = Enum.Font.GothamBold
getKeyBtn.TextSize = 16
getKeyBtn.TextColor3 = Color3.fromRGB(255, 255, 255)
getKeyBtn.BackgroundColor3 = Color3.fromRGB(80, 80, 80)
getKeyBtn.Size = UDim2.new(0.45, -5, 0, 35)
getKeyBtn.Position = UDim2.new(0.5, 5, 0, 100)
Instance.new("UICorner", getKeyBtn).CornerRadius = UDim.new(0, 6)
getKeyBtn.MouseButton1Click:Connect(function()
    local keyLink = GetKeyLink(Identifier, hwid)
    if setclipboard then setclipboard(keyLink) end
    Notif.New("üîó Link GetKey ƒë√£ copy!", 3)
end)

-- üîÅ Auto-check key
if savedKey ~= "" then
    Notif.New("üîÑ ƒêang ki·ªÉm tra key...", 2)
    local isValid, message = ValidateKey(savedKey, Identifier, hwid)
    if isValid then
        if writefile then writefile(keyFile, savedKey) end
        Notif.New("‚úîÔ∏è Key h·ª£p l·ªá! ƒêang t·∫£i script...", 3)
        loadstring(game:HttpGet("https://raw.githubusercontent.com/thaemmayanh/hub/refs/heads/main/AC.lua"))()
    else
        gui.Enabled = true
        Notif.New("‚ùå " .. (message or "Key check failed"), 3)
    end
else
    gui.Enabled = true
end
